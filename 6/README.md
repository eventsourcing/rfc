---
domain: rfc.eventsourcing.com
shortname: 6/HLC
name: Hybrid Logical Clocks
status: draft
editor: Yurii Rashkovskii <yrashk@gmail.com>
---

This specification describes the use of [Hybrid Logical Clocks](http://www.cse.buffalo.edu/tech-reports/2014-04.pdf) in Eventsourcing.

<blockquote>
HLC captures the causality relationship like logical clocks, and enables easy identification of consistent snapshots in distributed systems. Dually, HLC can be used in lieu of physical/NTP clocks since it maintains its logical clock to be always close to the NTP clock.
</blockquote>

## License

Copyright (c) 2016 Yurii Rashkovskii

This Specification is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.

This Specification is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program; if not, see [http://www.gnu.org/licenses](http://www.gnu.org/licenses).

## Language

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in [RFC 2119](http://tools.ietf.org/html/rfc2119).

## 0. Goals

The goals of this specification are:

* To indicate areas of hybrid logical clocks use.
* To provide a standard way to serialize hybrid logical clocks.

## 1. Timestamping

HLC timestamps SHALL BE used to indicate causal and temporal relationship
between events and commands.

Event <code>E_n</code> generated by a command <code>C</code>, MUST have a timestamp greater than the timestamp of <code>C</code>.

Event <code>E_n+1</code> MUST have a timestamp greater or equal to the timestamp
of <code>E_n</code>.

## 2. Binary Encoding

Binary encoding of an HLC timestamp (to be used along other [2/BES](../2/README.md) encodings) must follow the following layout:

| Offset (bytes) | Length (bytes) | Value                       |
|----------------|----------------|-----------------------------|
| 0              |  8             | logical time, long value    |
| 8              |  8             | logical counter, long value |

As per [2/BES](../2/README.md), the values are encoded using big endian byte order.

## 3. YAML Encoding

YAML encoding of an HLC timestamp (to be used along other [5/YES](../5/README.md) encodings) is as follows:

```yaml
!!str <logical time>.<logical counter>
```
